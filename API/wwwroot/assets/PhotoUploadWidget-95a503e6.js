import{T,r as w,f as jt,D as k,J as $i,O as Gt,M as ce}from"./index-f950316b.js";import{G as vt}from"./Item-8d555df0.js";function Et(i,t,e,r){function n(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(l){try{c(r.next(l))}catch(u){o(u)}}function h(l){try{c(r.throw(l))}catch(u){o(u)}}function c(l){l.done?a(l.value):n(l.value).then(s,h)}c((r=r.apply(i,t||[])).next())})}function Ot(i,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,n,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return h([c,l])}}function h(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(r=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,n=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(i,e)}catch(l){c=[6,l],n=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function He(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,a=[],o;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a}function We(i,t,e){if(e||arguments.length===2)for(var r=0,n=t.length,a;r<n;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return i.concat(a||Array.prototype.slice.call(t))}var Vi=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function zt(i,t){var e=Gi(i);if(typeof e.path!="string"){var r=i.webkitRelativePath;Object.defineProperty(e,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:i.name,writable:!1,configurable:!1,enumerable:!0})}return e}function Gi(i){var t=i.name,e=t&&t.lastIndexOf(".")!==-1;if(e&&!i.type){var r=t.split(".").pop().toLowerCase(),n=Vi.get(r);n&&Object.defineProperty(i,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return i}var Ki=[".DS_Store","Thumbs.db"];function qi(i){return Et(this,void 0,void 0,function(){return Ot(this,function(t){return Kt(i)&&Zi(i.dataTransfer)?[2,er(i.dataTransfer,i.type)]:Qi(i)?[2,Ji(i)]:Array.isArray(i)&&i.every(function(e){return"getFile"in e&&typeof e.getFile=="function"})?[2,tr(i)]:[2,[]]})})}function Zi(i){return Kt(i)}function Qi(i){return Kt(i)&&Kt(i.target)}function Kt(i){return typeof i=="object"&&i!==null}function Ji(i){return pe(i.target.files).map(function(t){return zt(t)})}function tr(i){return Et(this,void 0,void 0,function(){var t;return Ot(this,function(e){switch(e.label){case 0:return[4,Promise.all(i.map(function(r){return r.getFile()}))];case 1:return t=e.sent(),[2,t.map(function(r){return zt(r)})]}})})}function er(i,t){return Et(this,void 0,void 0,function(){var e,r;return Ot(this,function(n){switch(n.label){case 0:return i.items?(e=pe(i.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,e]:[4,Promise.all(e.map(ir))]):[3,2];case 1:return r=n.sent(),[2,Ye(gi(r))];case 2:return[2,Ye(pe(i.files).map(function(a){return zt(a)}))]}})})}function Ye(i){return i.filter(function(t){return Ki.indexOf(t.name)===-1})}function pe(i){if(i===null)return[];for(var t=[],e=0;e<i.length;e++){var r=i[e];t.push(r)}return t}function ir(i){if(typeof i.webkitGetAsEntry!="function")return Xe(i);var t=i.webkitGetAsEntry();return t&&t.isDirectory?mi(t):Xe(i)}function gi(i){return i.reduce(function(t,e){return We(We([],He(t),!1),He(Array.isArray(e)?gi(e):[e]),!1)},[])}function Xe(i){var t=i.getAsFile();if(!t)return Promise.reject("".concat(i," is not a File"));var e=zt(t);return Promise.resolve(e)}function rr(i){return Et(this,void 0,void 0,function(){return Ot(this,function(t){return[2,i.isDirectory?mi(i):ar(i)]})})}function mi(i){var t=i.createReader();return new Promise(function(e,r){var n=[];function a(){var o=this;t.readEntries(function(s){return Et(o,void 0,void 0,function(){var h,c,l;return Ot(this,function(u){switch(u.label){case 0:if(s.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return h=u.sent(),e(h),[3,4];case 3:return c=u.sent(),r(c),[3,4];case 4:return[3,6];case 5:l=Promise.all(s.map(rr)),n.push(l),a(),u.label=6;case 6:return[2]}})})},function(s){r(s)})}a()})}function ar(i){return Et(this,void 0,void 0,function(){return Ot(this,function(t){return[2,new Promise(function(e,r){i.file(function(n){var a=zt(n,i.fullPath);e(a)},function(n){r(n)})})]})})}var nr=function(i,t){if(i&&t){var e=Array.isArray(t)?t:t.split(","),r=i.name||"",n=(i.type||"").toLowerCase(),a=n.replace(/\/.*$/,"");return e.some(function(o){var s=o.trim().toLowerCase();return s.charAt(0)==="."?r.toLowerCase().endsWith(s):s.endsWith("/*")?a===s.replace(/\/.*$/,""):n===s})}return!0};function Ue(i){return cr(i)||sr(i)||bi(i)||or()}function or(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sr(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function cr(i){if(Array.isArray(i))return de(i)}function $e(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function Ve(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$e(Object(e),!0).forEach(function(r){vi(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):$e(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function vi(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function It(i,t){return hr(i)||ur(i,t)||bi(i,t)||lr()}function lr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bi(i,t){if(i){if(typeof i=="string")return de(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return de(i,t)}}function de(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function ur(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],n=!0,a=!1,o,s;try{for(e=e.call(i);!(n=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(h){a=!0,s=h}finally{try{!n&&e.return!=null&&e.return()}finally{if(a)throw s}}return r}}function hr(i){if(Array.isArray(i))return i}var fr="file-invalid-type",pr="file-too-large",dr="file-too-small",gr="too-many-files",mr=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var e=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:fr,message:"File type must be ".concat(e)}},Ge=function(t){return{code:pr,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Ke=function(t){return{code:dr,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},vr={code:gr,message:"Too many files"};function yi(i,t){var e=i.type==="application/x-moz-file"||nr(i,t);return[e,e?null:mr(t)]}function wi(i,t,e){if(ht(i.size))if(ht(t)&&ht(e)){if(i.size>e)return[!1,Ge(e)];if(i.size<t)return[!1,Ke(t)]}else{if(ht(t)&&i.size<t)return[!1,Ke(t)];if(ht(e)&&i.size>e)return[!1,Ge(e)]}return[!0,null]}function ht(i){return i!=null}function br(i){var t=i.files,e=i.accept,r=i.minSize,n=i.maxSize,a=i.multiple,o=i.maxFiles,s=i.validator;return!a&&t.length>1||a&&o>=1&&t.length>o?!1:t.every(function(h){var c=yi(h,e),l=It(c,1),u=l[0],f=wi(h,r,n),b=It(f,1),v=b[0],O=s?s(h):null;return u&&v&&!O})}function qt(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function Ut(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!i.target&&!!i.target.files}function qe(i){i.preventDefault()}function yr(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function wr(i){return i.indexOf("Edge/")!==-1}function xr(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return yr(i)||wr(i)}function tt(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return t.some(function(s){return!qt(r)&&s&&s.apply(void 0,[r].concat(a)),qt(r)})}}function Dr(){return"showOpenFilePicker"in window}function Er(i){if(ht(i)){var t=Object.entries(i).filter(function(e){var r=It(e,2),n=r[0],a=r[1],o=!0;return xi(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(Di))&&(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(e,r){var n=It(r,2),a=n[0],o=n[1];return Ve(Ve({},e),{},vi({},a,o))},{});return[{description:"Files",accept:t}]}return i}function Or(i){if(ht(i))return Object.entries(i).reduce(function(t,e){var r=It(e,2),n=r[0],a=r[1];return[].concat(Ue(t),[n],Ue(a))},[]).filter(function(t){return xi(t)||Di(t)}).join(",")}function Ar(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function Cr(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}function xi(i){return i==="audio/*"||i==="video/*"||i==="image/*"||i==="text/*"||/\w+\/[-+.\w]+/g.test(i)}function Di(i){return/^.*\.[\w]+$/.test(i)}var Tr=["children"],Mr=["open"],Sr=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Rr=["refKey","onChange","onClick"];function _r(i){return Ir(i)||Pr(i)||Ei(i)||jr()}function jr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Ir(i){if(Array.isArray(i))return ge(i)}function le(i,t){return zr(i)||kr(i,t)||Ei(i,t)||Nr()}function Nr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(i,t){if(i){if(typeof i=="string")return ge(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ge(i,t)}}function ge(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function kr(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],n=!0,a=!1,o,s;try{for(e=e.call(i);!(n=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(h){a=!0,s=h}finally{try{!n&&e.return!=null&&e.return()}finally{if(a)throw s}}return r}}function zr(i){if(Array.isArray(i))return i}function Ze(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function I(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ze(Object(e),!0).forEach(function(r){me(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Ze(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function me(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Zt(i,t){if(i==null)return{};var e=Lr(i,t),r,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(i,r)&&(e[r]=i[r])}return e}function Lr(i,t){if(i==null)return{};var e={},r=Object.keys(i),n,a;for(a=0;a<r.length;a++)n=r[a],!(t.indexOf(n)>=0)&&(e[n]=i[n]);return e}var Me=w.forwardRef(function(i,t){var e=i.children,r=Zt(i,Tr),n=Ai(r),a=n.open,o=Zt(n,Mr);return w.useImperativeHandle(t,function(){return{open:a}},[a]),jt.createElement(w.Fragment,null,e(I(I({},o),{},{open:a})))});Me.displayName="Dropzone";var Oi={disabled:!1,getFilesFromEvent:qi,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Me.defaultProps=Oi;Me.propTypes={children:T.func,accept:T.objectOf(T.arrayOf(T.string)),multiple:T.bool,preventDropOnDocument:T.bool,noClick:T.bool,noKeyboard:T.bool,noDrag:T.bool,noDragEventsBubbling:T.bool,minSize:T.number,maxSize:T.number,maxFiles:T.number,disabled:T.bool,getFilesFromEvent:T.func,onFileDialogCancel:T.func,onFileDialogOpen:T.func,useFsAccessApi:T.bool,autoFocus:T.bool,onDragEnter:T.func,onDragLeave:T.func,onDragOver:T.func,onDrop:T.func,onDropAccepted:T.func,onDropRejected:T.func,onError:T.func,validator:T.func};var ve={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Ai(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=I(I({},Oi),i),e=t.accept,r=t.disabled,n=t.getFilesFromEvent,a=t.maxSize,o=t.minSize,s=t.multiple,h=t.maxFiles,c=t.onDragEnter,l=t.onDragLeave,u=t.onDragOver,f=t.onDrop,b=t.onDropAccepted,v=t.onDropRejected,O=t.onFileDialogCancel,x=t.onFileDialogOpen,S=t.useFsAccessApi,R=t.autoFocus,M=t.preventDropOnDocument,N=t.noClick,F=t.noKeyboard,p=t.noDrag,g=t.noDragEventsBubbling,y=t.onError,E=t.validator,P=w.useMemo(function(){return Or(e)},[e]),G=w.useMemo(function(){return Er(e)},[e]),X=w.useMemo(function(){return typeof x=="function"?x:Qe},[x]),Y=w.useMemo(function(){return typeof O=="function"?O:Qe},[O]),A=w.useRef(null),C=w.useRef(null),K=w.useReducer(Fr,ve),Q=le(K,2),J=Q[0],H=Q[1],Lt=J.isFocused,At=J.isFileDialogActive,st=w.useRef(typeof window<"u"&&window.isSecureContext&&S&&Dr()),Ct=function(){!st.current&&At&&setTimeout(function(){if(C.current){var m=C.current.files;m.length||(H({type:"closeDialog"}),Y())}},300)};w.useEffect(function(){return window.addEventListener("focus",Ct,!1),function(){window.removeEventListener("focus",Ct,!1)}},[C,At,Y,st]);var rt=w.useRef([]),Ft=function(m){A.current&&A.current.contains(m.target)||(m.preventDefault(),rt.current=[])};w.useEffect(function(){return M&&(document.addEventListener("dragover",qe,!1),document.addEventListener("drop",Ft,!1)),function(){M&&(document.removeEventListener("dragover",qe),document.removeEventListener("drop",Ft))}},[A,M]),w.useEffect(function(){return!r&&R&&A.current&&A.current.focus(),function(){}},[A,R,r]);var ct=w.useCallback(function(d){y?y(d):console.error(d)},[y]),Ie=w.useCallback(function(d){d.preventDefault(),d.persist(),Yt(d),rt.current=[].concat(_r(rt.current),[d.target]),Ut(d)&&Promise.resolve(n(d)).then(function(m){if(!(qt(d)&&!g)){var z=m.length,W=z>0&&br({files:m,accept:P,minSize:o,maxSize:a,multiple:s,maxFiles:h,validator:E}),V=z>0&&!W;H({isDragAccept:W,isDragReject:V,isDragActive:!0,type:"setDraggedFiles"}),c&&c(d)}}).catch(function(m){return ct(m)})},[n,c,ct,g,P,o,a,s,h,E]),Ne=w.useCallback(function(d){d.preventDefault(),d.persist(),Yt(d);var m=Ut(d);if(m&&d.dataTransfer)try{d.dataTransfer.dropEffect="copy"}catch{}return m&&u&&u(d),!1},[u,g]),ke=w.useCallback(function(d){d.preventDefault(),d.persist(),Yt(d);var m=rt.current.filter(function(W){return A.current&&A.current.contains(W)}),z=m.indexOf(d.target);z!==-1&&m.splice(z,1),rt.current=m,!(m.length>0)&&(H({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ut(d)&&l&&l(d))},[A,l,g]),Bt=w.useCallback(function(d,m){var z=[],W=[];d.forEach(function(V){var Tt=yi(V,P),mt=le(Tt,2),ee=mt[0],ie=mt[1],re=wi(V,o,a),Xt=le(re,2),ae=Xt[0],ne=Xt[1],oe=E?E(V):null;if(ee&&ae&&!oe)z.push(V);else{var se=[ie,ne];oe&&(se=se.concat(oe)),W.push({file:V,errors:se.filter(function(Ui){return Ui})})}}),(!s&&z.length>1||s&&h>=1&&z.length>h)&&(z.forEach(function(V){W.push({file:V,errors:[vr]})}),z.splice(0)),H({acceptedFiles:z,fileRejections:W,type:"setFiles"}),f&&f(z,W,m),W.length>0&&v&&v(W,m),z.length>0&&b&&b(z,m)},[H,s,P,o,a,h,f,b,v,E]),Ht=w.useCallback(function(d){d.preventDefault(),d.persist(),Yt(d),rt.current=[],Ut(d)&&Promise.resolve(n(d)).then(function(m){qt(d)&&!g||Bt(m,d)}).catch(function(m){return ct(m)}),H({type:"reset"})},[n,Bt,ct,g]),dt=w.useCallback(function(){if(st.current){H({type:"openDialog"}),X();var d={multiple:s,types:G};window.showOpenFilePicker(d).then(function(m){return n(m)}).then(function(m){Bt(m,null),H({type:"closeDialog"})}).catch(function(m){Ar(m)?(Y(m),H({type:"closeDialog"})):Cr(m)?(st.current=!1,C.current?(C.current.value=null,C.current.click()):ct(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ct(m)});return}C.current&&(H({type:"openDialog"}),X(),C.current.value=null,C.current.click())},[H,X,Y,S,Bt,ct,G,s]),ze=w.useCallback(function(d){!A.current||!A.current.isEqualNode(d.target)||(d.key===" "||d.key==="Enter"||d.keyCode===32||d.keyCode===13)&&(d.preventDefault(),dt())},[A,dt]),Le=w.useCallback(function(){H({type:"focus"})},[]),Fe=w.useCallback(function(){H({type:"blur"})},[]),Be=w.useCallback(function(){N||(xr()?setTimeout(dt,0):dt())},[N,dt]),gt=function(m){return r?null:m},te=function(m){return F?null:gt(m)},Wt=function(m){return p?null:gt(m)},Yt=function(m){g&&m.stopPropagation()},Wi=w.useMemo(function(){return function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=d.refKey,z=m===void 0?"ref":m,W=d.role,V=d.onKeyDown,Tt=d.onFocus,mt=d.onBlur,ee=d.onClick,ie=d.onDragEnter,re=d.onDragOver,Xt=d.onDragLeave,ae=d.onDrop,ne=Zt(d,Sr);return I(I(me({onKeyDown:te(tt(V,ze)),onFocus:te(tt(Tt,Le)),onBlur:te(tt(mt,Fe)),onClick:gt(tt(ee,Be)),onDragEnter:Wt(tt(ie,Ie)),onDragOver:Wt(tt(re,Ne)),onDragLeave:Wt(tt(Xt,ke)),onDrop:Wt(tt(ae,Ht)),role:typeof W=="string"&&W!==""?W:"presentation"},z,A),!r&&!F?{tabIndex:0}:{}),ne)}},[A,ze,Le,Fe,Be,Ie,Ne,ke,Ht,F,p,r]),Yi=w.useCallback(function(d){d.stopPropagation()},[]),Xi=w.useMemo(function(){return function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=d.refKey,z=m===void 0?"ref":m,W=d.onChange,V=d.onClick,Tt=Zt(d,Rr),mt=me({accept:P,multiple:s,type:"file",style:{display:"none"},onChange:gt(tt(W,Ht)),onClick:gt(tt(V,Yi)),tabIndex:-1},z,C);return I(I({},mt),Tt)}},[C,e,s,Ht,r]);return I(I({},J),{},{isFocused:Lt&&!r,getRootProps:Wi,getInputProps:Xi,rootRef:A,inputRef:C,open:gt(dt)})}function Fr(i,t){switch(t.type){case"focus":return I(I({},i),{},{isFocused:!0});case"blur":return I(I({},i),{},{isFocused:!1});case"openDialog":return I(I({},ve),{},{isFileDialogActive:!0});case"closeDialog":return I(I({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":return I(I({},i),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return I(I({},i),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return I({},ve);default:return i}}function Qe(){}const Br=({setFiles:i})=>{const t={border:"dashed 3px  #eee",borderColor:"#eee",boarderRadius:"5px",paddingTop:"30px",textAlign:"center",hight:200},e={borderColor:"green"},r=w.useCallback(s=>{i(s.map(h=>Object.assign(h,{preview:URL.createObjectURL(h)})))},[i]),{getRootProps:n,getInputProps:a,isDragActive:o}=Ai({onDrop:r});return k.jsxs("div",{...n(),style:o?{...t,...e}:t,children:[k.jsx("input",{...a()}),k.jsx($i,{name:"upload",size:"huge"}),k.jsx(Gt,{content:"Drop image here"})]})};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function Je(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,r)}return e}function Ci(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Je(Object(e),!0).forEach(function(r){Yr(i,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Je(Object(e)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(e,r))})}return i}function be(i){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(i)}function Hr(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function ti(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,Mi(r.key),r)}}function Wr(i,t,e){return t&&ti(i.prototype,t),e&&ti(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Yr(i,t,e){return t=Mi(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Ti(i){return Xr(i)||Ur(i)||$r(i)||Vr()}function Xr(i){if(Array.isArray(i))return ye(i)}function Ur(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function $r(i,t){if(i){if(typeof i=="string")return ye(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ye(i,t)}}function ye(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Vr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(i,t){if(typeof i!="object"||i===null)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var r=e.call(i,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function Mi(i){var t=Gr(i,"string");return typeof t=="symbol"?t:String(t)}var Jt=typeof window<"u"&&typeof window.document<"u",it=Jt?window:{},Se=Jt&&it.document.documentElement?"ontouchstart"in it.document.documentElement:!1,Re=Jt?"PointerEvent"in it:!1,_="cropper",_e="all",Si="crop",Ri="move",_i="zoom",lt="e",ut="w",bt="s",at="n",Mt="ne",St="nw",Rt="se",_t="sw",we="".concat(_,"-crop"),ei="".concat(_,"-disabled"),$="".concat(_,"-hidden"),ii="".concat(_,"-hide"),Kr="".concat(_,"-invisible"),Qt="".concat(_,"-modal"),xe="".concat(_,"-move"),Nt="".concat(_,"Action"),$t="".concat(_,"Preview"),je="crop",ji="move",Pi="none",De="crop",Ee="cropend",Oe="cropmove",Ae="cropstart",ri="dblclick",qr=Se?"touchstart":"mousedown",Zr=Se?"touchmove":"mousemove",Qr=Se?"touchend touchcancel":"mouseup",ai=Re?"pointerdown":qr,ni=Re?"pointermove":Zr,oi=Re?"pointerup pointercancel":Qr,si="ready",ci="resize",li="wheel",Ce="zoom",ui="image/jpeg",Jr=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ta=/^data:/,ea=/^data:image\/jpeg;base64,/,ia=/^img|canvas$/i,Ii=200,Ni=100,hi={viewMode:0,dragMode:je,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Ii,minContainerHeight:Ni,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ra='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',aa=Number.isNaN||it.isNaN;function D(i){return typeof i=="number"&&!aa(i)}var fi=function(t){return t>0&&t<1/0};function ue(i){return typeof i>"u"}function pt(i){return be(i)==="object"&&i!==null}var na=Object.prototype.hasOwnProperty;function yt(i){if(!pt(i))return!1;try{var t=i.constructor,e=t.prototype;return t&&e&&na.call(e,"isPrototypeOf")}catch{return!1}}function U(i){return typeof i=="function"}var oa=Array.prototype.slice;function ki(i){return Array.from?Array.from(i):oa.call(i)}function L(i,t){return i&&U(t)&&(Array.isArray(i)||D(i.length)?ki(i).forEach(function(e,r){t.call(i,e,r,i)}):pt(i)&&Object.keys(i).forEach(function(e){t.call(i,i[e],e,i)})),i}var j=Object.assign||function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return pt(t)&&r.length>0&&r.forEach(function(a){pt(a)&&Object.keys(a).forEach(function(o){t[o]=a[o]})}),t},sa=/\.\d*(?:0|9){12}\d*$/;function xt(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return sa.test(i)?Math.round(i*t)/t:i}var ca=/^width|height|left|top|marginLeft|marginTop$/;function nt(i,t){var e=i.style;L(t,function(r,n){ca.test(n)&&D(r)&&(r="".concat(r,"px")),e[n]=r})}function la(i,t){return i.classList?i.classList.contains(t):i.className.indexOf(t)>-1}function B(i,t){if(t){if(D(i.length)){L(i,function(r){B(r,t)});return}if(i.classList){i.classList.add(t);return}var e=i.className.trim();e?e.indexOf(t)<0&&(i.className="".concat(e," ").concat(t)):i.className=t}}function et(i,t){if(t){if(D(i.length)){L(i,function(e){et(e,t)});return}if(i.classList){i.classList.remove(t);return}i.className.indexOf(t)>=0&&(i.className=i.className.replace(t,""))}}function wt(i,t,e){if(t){if(D(i.length)){L(i,function(r){wt(r,t,e)});return}e?B(i,t):et(i,t)}}var ua=/([a-z\d])([A-Z])/g;function Pe(i){return i.replace(ua,"$1-$2").toLowerCase()}function Te(i,t){return pt(i[t])?i[t]:i.dataset?i.dataset[t]:i.getAttribute("data-".concat(Pe(t)))}function kt(i,t,e){pt(e)?i[t]=e:i.dataset?i.dataset[t]=e:i.setAttribute("data-".concat(Pe(t)),e)}function ha(i,t){if(pt(i[t]))try{delete i[t]}catch{i[t]=void 0}else if(i.dataset)try{delete i.dataset[t]}catch{i.dataset[t]=void 0}else i.removeAttribute("data-".concat(Pe(t)))}var zi=/\s\s*/,Li=function(){var i=!1;if(Jt){var t=!1,e=function(){},r=Object.defineProperty({},"once",{get:function(){return i=!0,t},set:function(a){t=a}});it.addEventListener("test",e,r),it.removeEventListener("test",e,r)}return i}();function Z(i,t,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=e;t.trim().split(zi).forEach(function(a){if(!Li){var o=i.listeners;o&&o[a]&&o[a][e]&&(n=o[a][e],delete o[a][e],Object.keys(o[a]).length===0&&delete o[a],Object.keys(o).length===0&&delete i.listeners)}i.removeEventListener(a,n,r)})}function q(i,t,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=e;t.trim().split(zi).forEach(function(a){if(r.once&&!Li){var o=i.listeners,s=o===void 0?{}:o;n=function(){delete s[a][e],i.removeEventListener(a,n,r);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];e.apply(i,l)},s[a]||(s[a]={}),s[a][e]&&i.removeEventListener(a,s[a][e],r),s[a][e]=n,i.listeners=s}i.addEventListener(a,n,r)})}function Dt(i,t,e){var r;return U(Event)&&U(CustomEvent)?r=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,e)),i.dispatchEvent(r)}function Fi(i){var t=i.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var he=it.location,fa=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function pi(i){var t=i.match(fa);return t!==null&&(t[1]!==he.protocol||t[2]!==he.hostname||t[3]!==he.port)}function di(i){var t="timestamp=".concat(new Date().getTime());return i+(i.indexOf("?")===-1?"?":"&")+t}function Pt(i){var t=i.rotate,e=i.scaleX,r=i.scaleY,n=i.translateX,a=i.translateY,o=[];D(n)&&n!==0&&o.push("translateX(".concat(n,"px)")),D(a)&&a!==0&&o.push("translateY(".concat(a,"px)")),D(t)&&t!==0&&o.push("rotate(".concat(t,"deg)")),D(e)&&e!==1&&o.push("scaleX(".concat(e,")")),D(r)&&r!==1&&o.push("scaleY(".concat(r,")"));var s=o.length?o.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function pa(i){var t=Ci({},i),e=0;return L(i,function(r,n){delete t[n],L(t,function(a){var o=Math.abs(r.startX-a.startX),s=Math.abs(r.startY-a.startY),h=Math.abs(r.endX-a.endX),c=Math.abs(r.endY-a.endY),l=Math.sqrt(o*o+s*s),u=Math.sqrt(h*h+c*c),f=(u-l)/l;Math.abs(f)>Math.abs(e)&&(e=f)})}),e}function Vt(i,t){var e=i.pageX,r=i.pageY,n={endX:e,endY:r};return t?n:Ci({startX:e,startY:r},n)}function da(i){var t=0,e=0,r=0;return L(i,function(n){var a=n.startX,o=n.startY;t+=a,e+=o,r+=1}),t/=r,e/=r,{pageX:t,pageY:e}}function ot(i){var t=i.aspectRatio,e=i.height,r=i.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",a=fi(r),o=fi(e);if(a&&o){var s=e*t;n==="contain"&&s>r||n==="cover"&&s<r?e=r/t:r=e*t}else a?e=r/t:o&&(r=e*t);return{width:r,height:e}}function ga(i){var t=i.width,e=i.height,r=i.degree;if(r=Math.abs(r)%180,r===90)return{width:e,height:t};var n=r%90*Math.PI/180,a=Math.sin(n),o=Math.cos(n),s=t*o+e*a,h=t*a+e*o;return r>90?{width:h,height:s}:{width:s,height:h}}function ma(i,t,e,r){var n=t.aspectRatio,a=t.naturalWidth,o=t.naturalHeight,s=t.rotate,h=s===void 0?0:s,c=t.scaleX,l=c===void 0?1:c,u=t.scaleY,f=u===void 0?1:u,b=e.aspectRatio,v=e.naturalWidth,O=e.naturalHeight,x=r.fillColor,S=x===void 0?"transparent":x,R=r.imageSmoothingEnabled,M=R===void 0?!0:R,N=r.imageSmoothingQuality,F=N===void 0?"low":N,p=r.maxWidth,g=p===void 0?1/0:p,y=r.maxHeight,E=y===void 0?1/0:y,P=r.minWidth,G=P===void 0?0:P,X=r.minHeight,Y=X===void 0?0:X,A=document.createElement("canvas"),C=A.getContext("2d"),K=ot({aspectRatio:b,width:g,height:E}),Q=ot({aspectRatio:b,width:G,height:Y},"cover"),J=Math.min(K.width,Math.max(Q.width,v)),H=Math.min(K.height,Math.max(Q.height,O)),Lt=ot({aspectRatio:n,width:g,height:E}),At=ot({aspectRatio:n,width:G,height:Y},"cover"),st=Math.min(Lt.width,Math.max(At.width,a)),Ct=Math.min(Lt.height,Math.max(At.height,o)),rt=[-st/2,-Ct/2,st,Ct];return A.width=xt(J),A.height=xt(H),C.fillStyle=S,C.fillRect(0,0,J,H),C.save(),C.translate(J/2,H/2),C.rotate(h*Math.PI/180),C.scale(l,f),C.imageSmoothingEnabled=M,C.imageSmoothingQuality=F,C.drawImage.apply(C,[i].concat(Ti(rt.map(function(Ft){return Math.floor(xt(Ft))})))),C.restore(),A}var Bi=String.fromCharCode;function va(i,t,e){var r="";e+=t;for(var n=t;n<e;n+=1)r+=Bi(i.getUint8(n));return r}var ba=/^data:.*,/;function ya(i){var t=i.replace(ba,""),e=atob(t),r=new ArrayBuffer(e.length),n=new Uint8Array(r);return L(n,function(a,o){n[o]=e.charCodeAt(o)}),r}function wa(i,t){for(var e=[],r=8192,n=new Uint8Array(i);n.length>0;)e.push(Bi.apply(null,ki(n.subarray(0,r)))),n=n.subarray(r);return"data:".concat(t,";base64,").concat(btoa(e.join("")))}function xa(i){var t=new DataView(i),e;try{var r,n,a;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,s=2;s+1<o;){if(t.getUint8(s)===255&&t.getUint8(s+1)===225){n=s;break}s+=1}if(n){var h=n+4,c=n+10;if(va(t,h,4)==="Exif"){var l=t.getUint16(c);if(r=l===18761,(r||l===19789)&&t.getUint16(c+2,r)===42){var u=t.getUint32(c+4,r);u>=8&&(a=c+u)}}}if(a){var f=t.getUint16(a,r),b,v;for(v=0;v<f;v+=1)if(b=a+v*12+2,t.getUint16(b,r)===274){b+=8,e=t.getUint16(b,r),t.setUint16(b,1,r);break}}}catch{e=1}return e}function Da(i){var t=0,e=1,r=1;switch(i){case 2:e=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,e=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:e,scaleY:r}}var Ea={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,r=this.container,n=this.cropper,a=Number(e.minContainerWidth),o=Number(e.minContainerHeight);B(n,$),et(t,$);var s={width:Math.max(r.offsetWidth,a>=0?a:Ii),height:Math.max(r.offsetHeight,o>=0?o:Ni)};this.containerData=s,nt(n,{width:s.width,height:s.height}),B(t,$),et(n,$)},initCanvas:function(){var t=this.containerData,e=this.imageData,r=this.options.viewMode,n=Math.abs(e.rotate)%180===90,a=n?e.naturalHeight:e.naturalWidth,o=n?e.naturalWidth:e.naturalHeight,s=a/o,h=t.width,c=t.height;t.height*s>t.width?r===3?h=t.height*s:c=t.width/s:r===3?c=t.width/s:h=t.height*s;var l={aspectRatio:s,naturalWidth:a,naturalHeight:o,width:h,height:c};this.canvasData=l,this.limited=r===1||r===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=j({},l)},limitCanvas:function(t,e){var r=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,s=r.viewMode,h=a.aspectRatio,c=this.cropped&&o;if(t){var l=Number(r.minCanvasWidth)||0,u=Number(r.minCanvasHeight)||0;s>1?(l=Math.max(l,n.width),u=Math.max(u,n.height),s===3&&(u*h>l?l=u*h:u=l/h)):s>0&&(l?l=Math.max(l,c?o.width:0):u?u=Math.max(u,c?o.height:0):c&&(l=o.width,u=o.height,u*h>l?l=u*h:u=l/h));var f=ot({aspectRatio:h,width:l,height:u});l=f.width,u=f.height,a.minWidth=l,a.minHeight=u,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(s>(c?0:1)){var b=n.width-a.width,v=n.height-a.height;a.minLeft=Math.min(0,b),a.minTop=Math.min(0,v),a.maxLeft=Math.max(0,b),a.maxTop=Math.max(0,v),c&&this.limited&&(a.minLeft=Math.min(o.left,o.left+(o.width-a.width)),a.minTop=Math.min(o.top,o.top+(o.height-a.height)),a.maxLeft=o.left,a.maxTop=o.top,s===2&&(a.width>=n.width&&(a.minLeft=Math.min(0,b),a.maxLeft=Math.max(0,b)),a.height>=n.height&&(a.minTop=Math.min(0,v),a.maxTop=Math.max(0,v))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(t,e){var r=this.canvasData,n=this.imageData;if(e){var a=ga({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),o=a.width,s=a.height,h=r.width*(o/r.naturalWidth),c=r.height*(s/r.naturalHeight);r.left-=(h-r.width)/2,r.top-=(c-r.height)/2,r.width=h,r.height=c,r.aspectRatio=o/s,r.naturalWidth=o,r.naturalHeight=s,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,nt(this.canvas,j({width:r.width,height:r.height},Pt({translateX:r.left,translateY:r.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,r=this.imageData,n=r.naturalWidth*(e.width/e.naturalWidth),a=r.naturalHeight*(e.height/e.naturalHeight);j(r,{width:n,height:a,left:(e.width-n)/2,top:(e.height-a)/2}),nt(this.image,j({width:r.width,height:r.height},Pt(j({translateX:r.left,translateY:r.top},r)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,r=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:e.width,height:e.height};r&&(e.height*r>e.width?a.height=a.width/r:a.width=a.height*r),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=j({},a)},limitCropBox:function(t,e){var r=this.options,n=this.containerData,a=this.canvasData,o=this.cropBoxData,s=this.limited,h=r.aspectRatio;if(t){var c=Number(r.minCropBoxWidth)||0,l=Number(r.minCropBoxHeight)||0,u=s?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,f=s?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;c=Math.min(c,n.width),l=Math.min(l,n.height),h&&(c&&l?l*h>c?l=c/h:c=l*h:c?l=c/h:l&&(c=l*h),f*h>u?f=u/h:u=f*h),o.minWidth=Math.min(c,u),o.minHeight=Math.min(l,f),o.maxWidth=u,o.maxHeight=f}e&&(s?(o.minLeft=Math.max(0,a.left),o.minTop=Math.max(0,a.top),o.maxLeft=Math.min(n.width,a.left+a.width)-o.width,o.maxTop=Math.min(n.height,a.top+a.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=n.width-o.width,o.maxTop=n.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,t.movable&&t.cropBoxMovable&&kt(this.face,Nt,r.width>=e.width&&r.height>=e.height?Ri:_e),nt(this.cropBox,j({width:r.width,height:r.height},Pt({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Dt(this.element,De,this.getData())}},Oa={initPreview:function(){var t=this.element,e=this.crossOrigin,r=this.options.preview,n=e?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",o=document.createElement("img");if(e&&(o.crossOrigin=e),o.src=n,o.alt=a,this.viewBox.appendChild(o),this.viewBoxImage=o,!!r){var s=r;typeof r=="string"?s=t.ownerDocument.querySelectorAll(r):r.querySelector&&(s=[r]),this.previews=s,L(s,function(h){var c=document.createElement("img");kt(h,$t,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),e&&(c.crossOrigin=e),c.src=n,c.alt=a,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(c)})}},resetPreview:function(){L(this.previews,function(t){var e=Te(t,$t);nt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,ha(t,$t)})},preview:function(){var t=this.imageData,e=this.canvasData,r=this.cropBoxData,n=r.width,a=r.height,o=t.width,s=t.height,h=r.left-e.left-t.left,c=r.top-e.top-t.top;!this.cropped||this.disabled||(nt(this.viewBoxImage,j({width:o,height:s},Pt(j({translateX:-h,translateY:-c},t)))),L(this.previews,function(l){var u=Te(l,$t),f=u.width,b=u.height,v=f,O=b,x=1;n&&(x=f/n,O=a*x),a&&O>b&&(x=b/a,v=n*x,O=b),nt(l,{width:v,height:O}),nt(l.getElementsByTagName("img")[0],j({width:o*x,height:s*x},Pt(j({translateX:-h*x,translateY:-c*x},t))))}))}},Aa={bind:function(){var t=this.element,e=this.options,r=this.cropper;U(e.cropstart)&&q(t,Ae,e.cropstart),U(e.cropmove)&&q(t,Oe,e.cropmove),U(e.cropend)&&q(t,Ee,e.cropend),U(e.crop)&&q(t,De,e.crop),U(e.zoom)&&q(t,Ce,e.zoom),q(r,ai,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&q(r,li,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&q(r,ri,this.onDblclick=this.dblclick.bind(this)),q(t.ownerDocument,ni,this.onCropMove=this.cropMove.bind(this)),q(t.ownerDocument,oi,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&q(window,ci,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,r=this.cropper;U(e.cropstart)&&Z(t,Ae,e.cropstart),U(e.cropmove)&&Z(t,Oe,e.cropmove),U(e.cropend)&&Z(t,Ee,e.cropend),U(e.crop)&&Z(t,De,e.crop),U(e.zoom)&&Z(t,Ce,e.zoom),Z(r,ai,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Z(r,li,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Z(r,ri,this.onDblclick),Z(t.ownerDocument,ni,this.onCropMove),Z(t.ownerDocument,oi,this.onCropEnd),e.responsive&&Z(window,ci,this.onResize)}},Ca={resize:function(){if(!this.disabled){var t=this.options,e=this.container,r=this.containerData,n=e.offsetWidth/r.width,a=e.offsetHeight/r.height,o=Math.abs(n-1)>Math.abs(a-1)?n:a;if(o!==1){var s,h;t.restore&&(s=this.getCanvasData(),h=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(L(s,function(c,l){s[l]=c*o})),this.setCropBoxData(L(h,function(c,l){h[l]=c*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===Pi||this.setDragMode(la(this.dragBox,we)?ji:je)},wheel:function(t){var e=this,r=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*r,t)))},cropStart:function(t){var e=t.buttons,r=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(D(e)&&e!==1||D(r)&&r!==0||t.ctrlKey))){var n=this.options,a=this.pointers,o;t.changedTouches?L(t.changedTouches,function(s){a[s.identifier]=Vt(s)}):a[t.pointerId||0]=Vt(t),Object.keys(a).length>1&&n.zoomable&&n.zoomOnTouch?o=_i:o=Te(t.target,Nt),Jr.test(o)&&Dt(this.element,Ae,{originalEvent:t,action:o})!==!1&&(t.preventDefault(),this.action=o,this.cropping=!1,o===Si&&(this.cropping=!0,B(this.dragBox,Qt)))}},cropMove:function(t){var e=this.action;if(!(this.disabled||!e)){var r=this.pointers;t.preventDefault(),Dt(this.element,Oe,{originalEvent:t,action:e})!==!1&&(t.changedTouches?L(t.changedTouches,function(n){j(r[n.identifier]||{},Vt(n,!0))}):j(r[t.pointerId||0]||{},Vt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,r=this.pointers;t.changedTouches?L(t.changedTouches,function(n){delete r[n.identifier]}):delete r[t.pointerId||0],e&&(t.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,wt(this.dragBox,Qt,this.cropped&&this.options.modal)),Dt(this.element,Ee,{originalEvent:t,action:e}))}}},Ta={change:function(t){var e=this.options,r=this.canvasData,n=this.containerData,a=this.cropBoxData,o=this.pointers,s=this.action,h=e.aspectRatio,c=a.left,l=a.top,u=a.width,f=a.height,b=c+u,v=l+f,O=0,x=0,S=n.width,R=n.height,M=!0,N;!h&&t.shiftKey&&(h=u&&f?u/f:1),this.limited&&(O=a.minLeft,x=a.minTop,S=O+Math.min(n.width,r.width,r.left+r.width),R=x+Math.min(n.height,r.height,r.top+r.height));var F=o[Object.keys(o)[0]],p={x:F.endX-F.startX,y:F.endY-F.startY},g=function(E){switch(E){case lt:b+p.x>S&&(p.x=S-b);break;case ut:c+p.x<O&&(p.x=O-c);break;case at:l+p.y<x&&(p.y=x-l);break;case bt:v+p.y>R&&(p.y=R-v);break}};switch(s){case _e:c+=p.x,l+=p.y;break;case lt:if(p.x>=0&&(b>=S||h&&(l<=x||v>=R))){M=!1;break}g(lt),u+=p.x,u<0&&(s=ut,u=-u,c-=u),h&&(f=u/h,l+=(a.height-f)/2);break;case at:if(p.y<=0&&(l<=x||h&&(c<=O||b>=S))){M=!1;break}g(at),f-=p.y,l+=p.y,f<0&&(s=bt,f=-f,l-=f),h&&(u=f*h,c+=(a.width-u)/2);break;case ut:if(p.x<=0&&(c<=O||h&&(l<=x||v>=R))){M=!1;break}g(ut),u-=p.x,c+=p.x,u<0&&(s=lt,u=-u,c-=u),h&&(f=u/h,l+=(a.height-f)/2);break;case bt:if(p.y>=0&&(v>=R||h&&(c<=O||b>=S))){M=!1;break}g(bt),f+=p.y,f<0&&(s=at,f=-f,l-=f),h&&(u=f*h,c+=(a.width-u)/2);break;case Mt:if(h){if(p.y<=0&&(l<=x||b>=S)){M=!1;break}g(at),f-=p.y,l+=p.y,u=f*h}else g(at),g(lt),p.x>=0?b<S?u+=p.x:p.y<=0&&l<=x&&(M=!1):u+=p.x,p.y<=0?l>x&&(f-=p.y,l+=p.y):(f-=p.y,l+=p.y);u<0&&f<0?(s=_t,f=-f,u=-u,l-=f,c-=u):u<0?(s=St,u=-u,c-=u):f<0&&(s=Rt,f=-f,l-=f);break;case St:if(h){if(p.y<=0&&(l<=x||c<=O)){M=!1;break}g(at),f-=p.y,l+=p.y,u=f*h,c+=a.width-u}else g(at),g(ut),p.x<=0?c>O?(u-=p.x,c+=p.x):p.y<=0&&l<=x&&(M=!1):(u-=p.x,c+=p.x),p.y<=0?l>x&&(f-=p.y,l+=p.y):(f-=p.y,l+=p.y);u<0&&f<0?(s=Rt,f=-f,u=-u,l-=f,c-=u):u<0?(s=Mt,u=-u,c-=u):f<0&&(s=_t,f=-f,l-=f);break;case _t:if(h){if(p.x<=0&&(c<=O||v>=R)){M=!1;break}g(ut),u-=p.x,c+=p.x,f=u/h}else g(bt),g(ut),p.x<=0?c>O?(u-=p.x,c+=p.x):p.y>=0&&v>=R&&(M=!1):(u-=p.x,c+=p.x),p.y>=0?v<R&&(f+=p.y):f+=p.y;u<0&&f<0?(s=Mt,f=-f,u=-u,l-=f,c-=u):u<0?(s=Rt,u=-u,c-=u):f<0&&(s=St,f=-f,l-=f);break;case Rt:if(h){if(p.x>=0&&(b>=S||v>=R)){M=!1;break}g(lt),u+=p.x,f=u/h}else g(bt),g(lt),p.x>=0?b<S?u+=p.x:p.y>=0&&v>=R&&(M=!1):u+=p.x,p.y>=0?v<R&&(f+=p.y):f+=p.y;u<0&&f<0?(s=St,f=-f,u=-u,l-=f,c-=u):u<0?(s=_t,u=-u,c-=u):f<0&&(s=Mt,f=-f,l-=f);break;case Ri:this.move(p.x,p.y),M=!1;break;case _i:this.zoom(pa(o),t),M=!1;break;case Si:if(!p.x||!p.y){M=!1;break}N=Fi(this.cropper),c=F.startX-N.left,l=F.startY-N.top,u=a.minWidth,f=a.minHeight,p.x>0?s=p.y>0?Rt:Mt:p.x<0&&(c-=u,s=p.y>0?_t:St),p.y<0&&(l-=f),this.cropped||(et(this.cropBox,$),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}M&&(a.width=u,a.height=f,a.left=c,a.top=l,this.action=s,this.renderCropBox()),L(o,function(y){y.startX=y.endX,y.startY=y.endY})}},Ma={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&B(this.dragBox,Qt),et(this.cropBox,$),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=j({},this.initialImageData),this.canvasData=j({},this.initialCanvasData),this.cropBoxData=j({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(j(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),et(this.dragBox,Qt),B(this.cropBox,$)),this},replace:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,L(this.previews,function(r){r.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,et(this.cropper,ei)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,B(this.cropper,ei)),this},destroy:function(){var t=this.element;return t[_]?(t[_]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.canvasData,n=r.left,a=r.top;return this.moveTo(ue(t)?t:n+Number(t),ue(e)?e:a+Number(e))},moveTo:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(D(t)&&(r.left=t,n=!0),D(e)&&(r.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var r=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(r.width*t/r.naturalWidth,null,e)},zoomTo:function(t,e,r){var n=this.options,a=this.canvasData,o=a.width,s=a.height,h=a.naturalWidth,c=a.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&n.zoomable){var l=h*t,u=c*t;if(Dt(this.element,Ce,{ratio:t,oldRatio:o/h,originalEvent:r})===!1)return this;if(r){var f=this.pointers,b=Fi(this.cropper),v=f&&Object.keys(f).length?da(f):{pageX:r.pageX,pageY:r.pageY};a.left-=(l-o)*((v.pageX-b.left-a.left)/o),a.top-=(u-s)*((v.pageY-b.top-a.top)/s)}else yt(e)&&D(e.x)&&D(e.y)?(a.left-=(l-o)*((e.x-a.left)/o),a.top-=(u-s)*((e.y-a.top)/s)):(a.left-=(l-o)/2,a.top-=(u-s)/2);a.width=l,a.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),D(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,D(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(D(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,r=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(D(t)&&(r.scaleX=t,n=!0),D(e)&&(r.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.options,r=this.imageData,n=this.canvasData,a=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:a.left-n.left,y:a.top-n.top,width:a.width,height:a.height};var s=r.width/r.naturalWidth;if(L(o,function(l,u){o[u]=l/s}),t){var h=Math.round(o.y+o.height),c=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=c-o.x,o.height=h-o.y}}else o={x:0,y:0,width:0,height:0};return e.rotatable&&(o.rotate=r.rotate||0),e.scalable&&(o.scaleX=r.scaleX||1,o.scaleY=r.scaleY||1),o},setData:function(t){var e=this.options,r=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&yt(t)){var o=!1;e.rotatable&&D(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,o=!0),e.scalable&&(D(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,o=!0),D(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=r.width/r.naturalWidth;D(t.x)&&(a.left=t.x*s+n.left),D(t.y)&&(a.top=t.y*s+n.top),D(t.width)&&(a.width=t.width*s),D(t.height)&&(a.height=t.height*s),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?j({},this.containerData):{}},getImageData:function(){return this.sized?j({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&L(["left","top","width","height","naturalWidth","naturalHeight"],function(r){e[r]=t[r]}),e},setCanvasData:function(t){var e=this.canvasData,r=e.aspectRatio;return this.ready&&!this.disabled&&yt(t)&&(D(t.left)&&(e.left=t.left),D(t.top)&&(e.top=t.top),D(t.width)?(e.width=t.width,e.height=t.width/r):D(t.height)&&(e.height=t.height,e.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,e;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(t){var e=this.cropBoxData,r=this.options.aspectRatio,n,a;return this.ready&&this.cropped&&!this.disabled&&yt(t)&&(D(t.left)&&(e.left=t.left),D(t.top)&&(e.top=t.top),D(t.width)&&t.width!==e.width&&(n=!0,e.width=t.width),D(t.height)&&t.height!==e.height&&(a=!0,e.height=t.height),r&&(n?e.height=e.width/r:a&&(e.width=e.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,r=ma(this.image,this.imageData,e,t);if(!this.cropped)return r;var n=this.getData(t.rounded),a=n.x,o=n.y,s=n.width,h=n.height,c=r.width/Math.floor(e.naturalWidth);c!==1&&(a*=c,o*=c,s*=c,h*=c);var l=s/h,u=ot({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),f=ot({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),b=ot({aspectRatio:l,width:t.width||(c!==1?r.width:s),height:t.height||(c!==1?r.height:h)}),v=b.width,O=b.height;v=Math.min(u.width,Math.max(f.width,v)),O=Math.min(u.height,Math.max(f.height,O));var x=document.createElement("canvas"),S=x.getContext("2d");x.width=xt(v),x.height=xt(O),S.fillStyle=t.fillColor||"transparent",S.fillRect(0,0,v,O);var R=t.imageSmoothingEnabled,M=R===void 0?!0:R,N=t.imageSmoothingQuality;S.imageSmoothingEnabled=M,N&&(S.imageSmoothingQuality=N);var F=r.width,p=r.height,g=a,y=o,E,P,G,X,Y,A;g<=-s||g>F?(g=0,E=0,G=0,Y=0):g<=0?(G=-g,g=0,E=Math.min(F,s+g),Y=E):g<=F&&(G=0,E=Math.min(s,F-g),Y=E),E<=0||y<=-h||y>p?(y=0,P=0,X=0,A=0):y<=0?(X=-y,y=0,P=Math.min(p,h+y),A=P):y<=p&&(X=0,P=Math.min(h,p-y),A=P);var C=[g,y,E,P];if(Y>0&&A>0){var K=v/s;C.push(G*K,X*K,Y*K,A*K)}return S.drawImage.apply(S,[r].concat(Ti(C.map(function(Q){return Math.floor(xt(Q))})))),x},setAspectRatio:function(t){var e=this.options;return!this.disabled&&!ue(t)&&(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,r=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=t===je,o=e.movable&&t===ji;t=a||o?t:Pi,e.dragMode=t,kt(r,Nt,t),wt(r,we,a),wt(r,xe,o),e.cropBoxMovable||(kt(n,Nt,t),wt(n,we,a),wt(n,xe,o))}return this}},Sa=it.Cropper,Hi=function(){function i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Hr(this,i),!t||!ia.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=j({},hi,yt(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Wr(i,[{key:"init",value:function(){var e=this.element,r=e.tagName.toLowerCase(),n;if(!e[_]){if(e[_]=this,r==="img"){if(this.isImg=!0,n=e.getAttribute("src")||"",this.originalUrl=n,!n)return;n=e.src}else r==="canvas"&&window.HTMLCanvasElement&&(n=e.toDataURL());this.load(n)}}},{key:"load",value:function(e){var r=this;if(e){this.url=e,this.imageData={};var n=this.element,a=this.options;if(!a.rotatable&&!a.scalable&&(a.checkOrientation=!1),!a.checkOrientation||!window.ArrayBuffer){this.clone();return}if(ta.test(e)){ea.test(e)?this.read(ya(e)):this.clone();return}var o=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=s,o.onerror=s,o.ontimeout=s,o.onprogress=function(){o.getResponseHeader("content-type")!==ui&&o.abort()},o.onload=function(){r.read(o.response)},o.onloadend=function(){r.reloading=!1,r.xhr=null},a.checkCrossOrigin&&pi(e)&&n.crossOrigin&&(e=di(e)),o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials=n.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(e){var r=this.options,n=this.imageData,a=xa(e),o=0,s=1,h=1;if(a>1){this.url=wa(e,ui);var c=Da(a);o=c.rotate,s=c.scaleX,h=c.scaleY}r.rotatable&&(n.rotate=o),r.scalable&&(n.scaleX=s,n.scaleY=h),this.clone()}},{key:"clone",value:function(){var e=this.element,r=this.url,n=e.crossOrigin,a=r;this.options.checkCrossOrigin&&pi(r)&&(n||(n="anonymous"),a=di(r)),this.crossOrigin=n,this.crossOriginUrl=a;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=a||r,o.alt=e.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),B(o,ii),e.parentNode.insertBefore(o,e.nextSibling)}},{key:"start",value:function(){var e=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var n=it.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(it.navigator.userAgent),a=function(c,l){j(e.imageData,{naturalWidth:c,naturalHeight:l,aspectRatio:c/l}),e.initialImageData=j({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(r.naturalWidth&&!n){a(r.naturalWidth,r.naturalHeight);return}var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){a(o.width,o.height),n||s.removeChild(o)},o.src=r.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var e=this.element,r=this.options,n=this.image,a=e.parentNode,o=document.createElement("div");o.innerHTML=ra;var s=o.querySelector(".".concat(_,"-container")),h=s.querySelector(".".concat(_,"-canvas")),c=s.querySelector(".".concat(_,"-drag-box")),l=s.querySelector(".".concat(_,"-crop-box")),u=l.querySelector(".".concat(_,"-face"));this.container=a,this.cropper=s,this.canvas=h,this.dragBox=c,this.cropBox=l,this.viewBox=s.querySelector(".".concat(_,"-view-box")),this.face=u,h.appendChild(n),B(e,$),a.insertBefore(s,e.nextSibling),et(n,ii),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,B(l,$),r.guides||B(l.getElementsByClassName("".concat(_,"-dashed")),$),r.center||B(l.getElementsByClassName("".concat(_,"-center")),$),r.background&&B(s,"".concat(_,"-bg")),r.highlight||B(u,Kr),r.cropBoxMovable&&(B(u,xe),kt(u,Nt,_e)),r.cropBoxResizable||(B(l.getElementsByClassName("".concat(_,"-line")),$),B(l.getElementsByClassName("".concat(_,"-point")),$)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),U(r.ready)&&q(e,si,r.ready,{once:!0}),Dt(e,si)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var e=this.cropper.parentNode;e&&e.removeChild(this.cropper),et(this.element,$)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Sa,i}},{key:"setDefaults",value:function(e){j(hi,yt(e)&&e)}}]),i}();j(Hi.prototype,Ea,Oa,Aa,Ca,Ta,Ma);var ft=function(){return ft=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},ft.apply(this,arguments)};function fe(i,t){var e={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)<0&&(e[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(r=Object.getOwnPropertySymbols(i);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(e[r[n]]=i[r[n]])}return e}var Ra=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],_a={opacity:0,maxWidth:"100%"},ja=jt.forwardRef(function(i,t){var e=fe(i,[]),r=e.dragMode,n=r===void 0?"crop":r,a=e.src,o=e.style,s=e.className,h=e.crossOrigin,c=e.scaleX,l=e.scaleY,u=e.enable,f=e.zoomTo,b=e.rotateTo,v=e.alt,O=v===void 0?"picture":v,x=e.ready,S=e.onInitialized,R=fe(e,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),M={scaleY:l,scaleX:c,enable:u,zoomTo:f,rotateTo:b},N=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];var y=w.useRef(null);return jt.useEffect(function(){p.forEach(function(E){E&&(typeof E=="function"?E(y.current):E.current=y.current)})},[p]),y}(t,w.useRef(null));w.useEffect(function(){var p;!((p=N.current)===null||p===void 0)&&p.cropper&&typeof f=="number"&&N.current.cropper.zoomTo(f)},[e.zoomTo]),w.useEffect(function(){var p;!((p=N.current)===null||p===void 0)&&p.cropper&&a!==void 0&&N.current.cropper.reset().clear().replace(a)},[a]),w.useEffect(function(){if(N.current!==null){var p=new Hi(N.current,ft(ft({dragMode:n},R),{ready:function(g){g.currentTarget!==null&&function(y,E){E===void 0&&(E={});var P=E.enable,G=P===void 0||P,X=E.scaleX,Y=X===void 0?1:X,A=E.scaleY,C=A===void 0?1:A,K=E.zoomTo,Q=K===void 0?0:K,J=E.rotateTo;G?y.enable():y.disable(),y.scaleX(Y),y.scaleY(C),J!==void 0&&y.rotateTo(J),Q>0&&y.zoomTo(Q)}(g.currentTarget.cropper,M),x&&x(g)}}));S&&S(p)}return function(){var g,y;(y=(g=N.current)===null||g===void 0?void 0:g.cropper)===null||y===void 0||y.destroy()}},[N]);var F=function(p){return Ra.reduce(function(g,y){var E=g,P=y;return E[P],fe(E,[typeof P=="symbol"?P:P+""])},p)}(ft(ft({},R),{crossOrigin:h,src:a,alt:O}));return jt.createElement("div",{style:o,className:s},jt.createElement("img",ft({},F,{style:_a,ref:N})))});const Pa=({setCropper:i,imagePreview:t})=>k.jsx(ja,{src:t,style:{height:200,width:"100%"},initialAspectRatio:1,aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,autoCropArea:1,background:!1,onInitialized:e=>{i(e)}}),ka=({uploadPhoto:i,loading:t})=>{const[e,r]=w.useState([]),[n,a]=w.useState(),o=()=>{n&&n.getCroppedCanvas().toBlob(s=>{i(s)})};return w.useEffect(()=>()=>{e.forEach(s=>{URL.revokeObjectURL(s.preview)})},[e]),k.jsxs(vt,{children:[k.jsxs(vt.Column,{width:4,children:[k.jsx(Gt,{color:"teal",content:"Step 1 - Add Photo"}),k.jsx(Br,{setFiles:r})]}),k.jsx(vt.Column,{width:1}),k.jsxs(vt.Column,{width:4,children:[k.jsx(Gt,{color:"teal",content:"Step 2 - Resize Image"}),e&&e.length>0&&k.jsx(Pa,{setCropper:a,imagePreview:e[0].preview})]}),k.jsx(vt.Column,{width:1}),k.jsxs(vt.Column,{width:4,children:[k.jsx(Gt,{color:"teal",content:"Step 3 - Preview & Upload"}),e&&e.length>0&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"img-preview",style:{minHeight:200,overflow:"hidden"}}),k.jsxs(ce.Group,{width:2,children:[k.jsx(ce,{loading:t,onClick:o,positive:!0,icon:"check"}),k.jsx(ce,{disabled:t,onClick:()=>{r([])},icon:"close"})]})]})]})]})};export{ka as PhotoUploadWidget};
