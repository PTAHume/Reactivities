import{N as p,r,aw as c,D as e,S as a,O as g,J as x,M as l,ax as y}from"./index-c22b6146.js";import{u as m}from"./hooks-801ab87e.js";import{LoginForm as j}from"./LoginForm-2dc89162.js";import"./formik.esm-9bf00cd2.js";import"./tiny-warning.esm-c932d744.js";import"./_copyArray-e5846383.js";import"./InputControl-4187c228.js";import"./Form-dd75a905.js";const A=()=>{const{modalStore:u}=p(),n=m().get("email"),t=m().get("token"),i={Verifying:"Verifying",Failed:"Failed",Success:"Success"},[d,o]=r.useState(i.Verifying),f=()=>{c.Account.resendEmailConfirm(n).then(()=>{y.success("Verification email resent - please check your email")}).catch(s=>{console.log(s)})};r.useEffect(()=>{c.Account.verifyEmail(t,n).then(()=>{o(i.Success)}).catch(s=>{console.log(s),o(i.Failed)})},[i.Failed,i.Success,t,n]);const h=()=>{switch(d){case i.Verifying:return e.jsx("p",{children:"Verifying..."});case i.Failed:return e.jsxs("div",{children:[e.jsx("p",{children:"Verification failed. You can try resending the verify the link to your Email"}),e.jsx(l,{primary:!0,onClick:()=>{f()},content:"Resent email confirmation",size:"huge"})]});case i.Success:return e.jsxs("div",{children:[e.jsx("p",{children:"Email has been verified - you can now log in"}),e.jsx(l,{positive:!0,size:"huge",content:"Login",onClick:()=>{u.openModal(e.jsx(j,{}))}})]})}};return e.jsxs(a,{placeholder:!0,textAlign:"center",children:[e.jsxs(g,{icon:!0,children:[e.jsx(x,{name:"envelope"}),"Email Verification"]}),e.jsx(a.Inline,{children:h()})]})};export{A as ConfirmEmail};
